---
title: 前端加密杂谈
description: 随笔
tags: [加密]
---

## 前端加密是否有意义
先说个人结论：前端加密有意义，但意义是在增加攻击人的破解成本上。


前端加密一直是一个比较有[争议的话题](https://www.zhihu.com/question/25539382)，双方的基本观点如下：

有意义：
1. 保护用户隐私，用户信息不至于在网络上裸奔（明文传输）。
2. 防止同账号密码跨站使用。
3. 不再后台日志明文记录，增加破解难度。

无意义：
1. 对于服务端而言，无论使用什么算法加密，从数据层面讲都是【明文】，只要被劫持，不需要去破解，直接伪造请求即可。
2. 前端代码是对用户完全可见的，即加密算法也可看到，只是增加了破解难度，没有根本解决问题。


![中间代理](https://cdn.jsdelivr.net/gh/sultan-young/picture-bed/assets/20221020191904.png)
举个例子，现在大多数公司都有自己的内网，也就是说都会有一台代理服务器（假如扮演了攻击者的角色）完全可以看到你电脑的网络请求，而且很不凑巧，你在一个http协议的网站上进行了登录，在代理服务器上，你的账号密码将赤裸裸的展示出来：

```json
{
    "username" : "root",
    "password" : "123456"
}
```
此时别有用心者，就会使用该密码顺利登上你的个人主页了~ 而假设该网站对请求做了简单的MD5加密的，代理服务器捕获到的信息可能就是：
```json 
{
    "username" : "root",
    "password" : "E10ADC3949BA59ABBE56E057F20F883E"
}
```
此时他无法通过简单的输入账号密码登录了，看~前端加密起到了一定的效果。

> 现在，其实我们不需要这么做了，对于https的网站，我们传输的数据不再是明文裸奔，https在http协议的基础上，增加了TLS/SSL 加密， 其中， ·Public-Private-Key·（非对称加密的一种）会帮我们隐藏明文。


> 看到了一句话可以概括目前前端在鉴权加密上的意义。既然市面上大部分锁都可以在20分钟内撬开，那门上装锁是否还有意义？

## 常见的前端加密方式
### MD5 摘要算法
md5是一种被广泛使用的密码散列函数，可以产生出一个128位（16字节）的散列值，用于确保信息传输的完整一致。**MD5加密后的结果长度一致而且不可逆**， md5严格意义上来讲只是一种编码方式，用来验证数据的完整性和唯一性，如果用来加密，需要配合加盐进行。

### AES 对称加密
加密和解密用同一个密钥。需要其中加密方将密钥发送给解密一方，如果密钥被中间人劫持，双方交换的信息还是透明的。所以堆成加密不是绝对安全的。

![对称加密](https://cdn.jsdelivr.net/gh/sultan-young/picture-bed/assets/20221020190226.png)


### RSA 非对称加密
非对称加密指的是加密和解密用不同的密钥。一般公钥用于加密，私钥用于解密。私有密钥不能让其他任何人知道，而公开密钥则可以随意发布，任何人都可以获得。
![非对称加密](https://cdn.jsdelivr.net/gh/sultan-young/picture-bed/assets/20221020190434.png)


### AES + RSA （https的做法）
> https 简介：https是在http协议的基础上，增加了TLS/SSL 解密环节，具有信息加密，信息完整性校验，身份验证的功能。
![HTTPS](https://cdn.jsdelivr.net/gh/sultan-young/picture-bed/assets/20221021102939.png)
https中采用了混合加密的方式来传输密文，其原因主要是因为 RSA 在加密过程中性能代价较高，而 AES 的加密解密都为一个密钥，计算较快。所以混合加密在加密过程中大致流程为：
发送密文一方，先用接受密文的公钥对 对称加密 的唯一密钥进行加密，接受密文方用自己的私钥解密获得唯一密钥，之后双方就可以通过对称加密直接加密/解密并传输密文了。

![混合加密流程](https://cdn.jsdelivr.net/gh/sultan-young/picture-bed/assets/20221021105156.png)



## 一些思考
非对称加密在 CS/BS 架构中，客户端和服务端一次完整的请求为， 客户端携带一些信息发起请求， 服务端收到请求后，携带一些信息响应请求。我们需要在发起请求和响应请求两个阶段都做加密，这意味着，客户端和服务端都需要自己的公钥、私钥。 服务端具有隐蔽性，私钥是相对安全的。但是客户端一般都是在用户本机，BS中可以明文看代码，CS中可以解包看代码，那么如何保证客户端中的 私钥 安全性呢？



> 前端加密还需要其他手段的一些配合，如代码混淆，调式保护，变量替换，僵尸代码注入等。